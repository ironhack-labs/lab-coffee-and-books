# layouts [![NPM version](https://img.shields.io/npm/v/layouts.svg?style=flat)](https://www.npmjs.com/package/layouts) [![NPM monthly downloads](https://img.shields.io/npm/dm/layouts.svg?style=flat)](https://npmjs.org/package/layouts) [![NPM total downloads](https://img.shields.io/npm/dt/layouts.svg?style=flat)](https://npmjs.org/package/layouts) [![Linux Build Status](https://img.shields.io/travis/doowb/layouts.svg?style=flat&label=Travis)](https://travis-ci.org/doowb/layouts)

> Wraps templates with layouts. Layouts can use other layouts and be nested to any depth. This can be used 100% standalone to wrap any kind of file with banners, headers or footer content. Use for markdown, HTML, handlebars views, lo-dash templates, etc. Layouts can also be vinyl files.

- [Install](#install)
- [Usage](#usage)
- [Examples](#examples)
- [Customization](#customization)
- [API](#api)
- [History](#history)
  * [1.0.0](#100)
  * [0.13.0](#0130)
  * [0.12.0](#0120)
  * [0.11.0](#0110)
- [About](#about)

_(TOC generated by [verb](https://github.com/verbose/verb) using [markdown-toc](https://github.com/jonschlinkert/markdown-toc))_

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm install --save layouts
```

## Usage

```js
var renderLayouts = require('layouts');
```

## Examples

**Basic example**

In this example, two layouts are used:

* the first layout, `one`, will wrap the string
* the second layout, `two`, will wrap the first layout

```js
var layouts = {
  one: {content: 'one before\n{% body %}\none after', layout: 'two'},
  two: {content: 'two before\n{% body %}\ntwo after'},
};

// `one` is the name of the first layout to use on the provided string
renderLayouts('<div>Wrap me with a layout!!!</div>', 'one', layouts);
```

Results in:

```html
two before
one before
<div>Wrap me with a layout!!!</div>
one after
two after
```

**HTML**

This example shows how to use nested HTML layouts to wrap content:

```js
var layouts = {};

layouts.base = {
  path: 'base.tmpl',
  content: [
    '<!DOCTYPE html>',
    '<html lang="en">',
    '  <head>',
    '    <meta charset="UTF-8">',
    '    <title>Home</title>',
    '  </head>',
    '  <body>',
    '    {% body %}',
    '  </body>',
    '</html>',
  ].join('\n')
};

// this `nav` layout will be wrapped with the `base` layout
layouts.nav = {
  path: 'nav.tmpl',
  layout: 'base',
  content: '<nav>\n{% body %}\n</nav>'
};

// this string will be wrapped with the `nav` layout
var str = [
  '<ul class="categories">',
  '  <li class="active"> <a href="#"> Development </a> </li>',
  '  <li> <a href="#"> Design </a> </li>',
  '  <li> <a href="#"> Node.js </a> </li>',
  '</ul>'
].join('\n')

// `nav` is the name of the layout to use
renderLayouts(str, nav, layouts);
```

Results in something like:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Home</title>
  </head>
  <body>
    <nav>
      <ul class="categories">
        <li class="active"> <a href="#"> Development </a> </li>
        <li> <a href="#"> Design </a> </li>
        <li> <a href="#"> Node.js </a> </li>
      </ul>
    </nav>
  </body>
</html>
```

## Customization

By default, `{% body %}` is used as the placeholder (insertion point) for content, but this can easily be customized with the following options:

* `layoutDelims`: the delimiters to use. This can be a regex, like `/\{{([^}]+)\}}/`, or an array of delimiter strings, like `['\{{', '}}']`
* `contentTag`: the name of the content placeholder tag _(defaults to **body**)_.

## API

### [layouts](index.js#L40)

Apply a layout from the `layouts` object to `file.contents`. Layouts will be recursively applied until a layout is not defined by the returned file.

**Params**

* `file` **{Object}**: File object. This can be a plain object or [vinyl](https://github.com/gulpjs/vinyl) file.
* `layouts` **{Object}**: Object of file objects to use as "layouts".
* `options` **{Object}**
* `returns` **{Object}**: Returns the original file object with layout(s) applied.

**Example**

```js
var applyLayouts = require('layouts');
var layouts = {};
layouts.default = new File({path: 'default', contents: new Buffer('foo\n{% body %}\nbar')}),
layouts.other = new File({path: 'other', contents: new Buffer('baz\n{% body %}\nqux')});
layouts.other.layout = 'default';

var file = new File({path: 'whatever', contents: new Buffer('inner')});
file.layout = 'other';

applyLayouts(file, layouts);
console.log(file.contents.toString());
// foo
// bar
// inner
// baz
// qux
```

## History

### 1.0.0

**Breaking changes**

* renames `layoutHistory` to `layoutStack`
* layouts in `layoutStack` are now the actual layout object, instead of the layout name

**Added**

* Adds support for a function as the last argument. If passed, the function is called on the file and each layout with this signature: `fn(file, layout)`.

### 0.13.0

**Breaking changes**

* The main `layouts()` function now expects a `file` object as the first argument. This can be an object with `path`, `layout` and `contents` properties, or a valid [vinyl](https://github.com/gulpjs/vinyl) file. See the [API docs](#api) for more details.

### 0.12.0

**Breaking changes**

* change `options.tag` to `options.contentTag`

**Housekeeping**

* update tests to use `assert` instead of `should`

### 0.11.0

* All view objects must now have a `path` property, following [vinyl](https://github.com/gulpjs/vinyl) conventions.

## About

### Related projects

You might also be interested in these projects:

* [assemble](https://www.npmjs.com/package/assemble): Get the rocks out of your socks! Assemble makes you fast at creating web projects… [more](https://github.com/assemble/assemble) | [homepage](https://github.com/assemble/assemble "Get the rocks out of your socks! Assemble makes you fast at creating web projects. Assemble is used by thousands of projects for rapid prototyping, creating themes, scaffolds, boilerplates, e-books, UI components, API documentation, blogs, building websit")
* [gulp](https://www.npmjs.com/package/gulp): The streaming build system | [homepage](http://gulpjs.com "The streaming build system")
* [handlebars-layouts](https://www.npmjs.com/package/handlebars-layouts): Handlebars helpers which implement layout blocks similar to Jade, Jinja, Nunjucks, Swig, and Twig. | [homepage](https://github.com/shannonmoeller/handlebars-layouts "Handlebars helpers which implement layout blocks similar to Jade, Jinja, Nunjucks, Swig, and Twig.")
* [inject-snippet](https://www.npmjs.com/package/inject-snippet): Inject a snippet of code or content into a string. | [homepage](https://github.com/jonschlinkert/inject-snippet "Inject a snippet of code or content into a string.")
* [templates](https://www.npmjs.com/package/templates): System for creating and managing template collections, and rendering templates with any node.js template engine… [more](https://github.com/jonschlinkert/templates) | [homepage](https://github.com/jonschlinkert/templates "System for creating and managing template collections, and rendering templates with any node.js template engine. Can be used as the basis for creating a static site generator or blog framework.")
* [verb](https://www.npmjs.com/package/verb): Documentation generator for GitHub projects. Verb is extremely powerful, easy to use, and is used… [more](https://github.com/verbose/verb) | [homepage](https://github.com/verbose/verb "Documentation generator for GitHub projects. Verb is extremely powerful, easy to use, and is used on hundreds of projects of all sizes to generate everything from API docs to readmes.")
* [vinyl](https://www.npmjs.com/package/vinyl): Virtual file format. | [homepage](https://github.com/gulpjs/vinyl#readme "Virtual file format.")

### Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](../../issues/new).

### Contributors

| **Commits** | **Contributor** | 
| --- | --- |
| 131 | [jonschlinkert](https://github.com/jonschlinkert) |
| 26 | [doowb](https://github.com/doowb) |

### Building docs

_(This project's readme.md is generated by [verb](https://github.com/verbose/verb-generate-readme), please don't edit the readme directly. Any changes to the readme must be made in the [.verb.md](.verb.md) readme template.)_

To generate the readme, run the following command:

```sh
$ npm install -g verbose/verb#dev verb-generate-readme && verb
```

### Running tests

Running and reviewing unit tests is a great way to get familiarized with a library and its API. You can install dependencies and run tests with the following command:

```sh
$ npm install && npm test
```

### Author

**Brian Woodward**

* [github/doowb](https://github.com/doowb)
* [twitter/doowb](https://twitter.com/doowb)

### License

Copyright © 2017, [Brian Woodward](https://github.com/doowb).
Released under the [MIT License](LICENSE).

***

_This file was generated by [verb-generate-readme](https://github.com/verbose/verb-generate-readme), v0.6.0, on August 07, 2017._